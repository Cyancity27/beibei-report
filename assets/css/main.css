/* ---------- 1. 全局变量与基础设置 ---------- */
:root {
  --rose: #E7B5A1;
  --cream: #FFF9F5;
  --lilac: #C9B6D7;
  --font-en: 'Playfair Display', serif;
  --dark: #4a2c2a;
  --font-zh: 'Noto Sans SC', sans-serif; /* 使用更通用的中文字体 */

  /* 全新的背景色板 */
  --bg-daybreak: #FFF9F5;     /* 晨曦奶油白 */
  --bg-daylight: #FDF4F6;   /* 日间樱花粉 */
  --bg-dusk: #E7B5A1;         /* 黄昏玫瑰金 */
  --bg-twilight: #C9B6D7;     /* 薄暮丁香紫 */
  --bg-midnight: #062339;     /* 午夜蓝 */
  --bg-starlight: #1a1a2e;     /* 星空蓝 */
  --bg-chp6: #2d3748;     /* 星空蓝 */
  --bg-chp5: #3E4C63;
}

html, body {
  margin: 0;
  padding: 0;
  font-family: var(--font-zh);
  /* 移除全局背景，交由每个section独立控制 */
}

.section {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 6rem 1rem 4rem; /* 增加顶部padding，避免内容被导航栏遮挡 */
  text-align: center;
  transition: background 0.5s ease-in-out; /* 为背景变化增加过渡 */
}

.section-title {
  font-size: 2.5rem;
  margin-bottom: 2rem;
  letter-spacing: .1em;
}

.section-subtitle {
  text-align: center;
  margin-top: 0.5rem;
  margin-bottom: 3rem;
  font-size: 1.1rem;
}


@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Inter:wght@400;500;600&display=swap');


/* ---------- 导航栏 (最终美化版) ---------- */
/* ---------- 导航栏 (最终自适应宏大版) ---------- */
.nav {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 999;
  background: rgba(255, 251, 249, 0.85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  width: 100%;
  display: flex;
  justify-content: center;
  /* ↓↓↓↓↓↓ 核心改进点 1：让导航栏的垂直padding也自适应，增加面积感 ↓↓↓↓↓↓ */
  padding: clamp(0.5rem, 1.5vw, 1rem) 0;
  box-shadow: 0 2px 20px rgba(231, 181, 161, 0.1);
  border-bottom: 1px solid rgba(231, 181, 161, 0.2);
  transition: padding 0.3s ease; /* 增加一个过渡效果 */
}

.nav ul {
  display: flex;
  /* ↓↓↓↓↓↓ 核心改进点 2：间距也使用clamp，让其在不同屏幕下更和谐 ↓↓↓↓↓↓ */
  gap: clamp(1.5rem, 3vw, 3.5rem);
  padding: 0;
  margin: 0;
  list-style: none;
  align-items: center;
}

.nav-item {
  cursor: pointer;
  /* ↓↓↓↓↓↓ 核心改进点 3：字体大小使用clamp实现自适应，核心中的核心 ↓↓↓↓↓↓ */
  /* 最小1.1rem, 理想值为 0.8rem + 0.5vw (随屏幕宽度变化), 最大1.6rem */
  font-size: clamp(1.1rem, 0.8rem + 1.0vw, 1.9rem);
  font-family: 'Playfair Display', 'Noto Sans SC', serif;
  font-weight: 700;
  color: var(--rose);
  text-decoration: none;
  /* ↓↓↓↓↓↓ 核心改进点 4：按钮的内边距也自适应，保证协调性 ↓↓↓↓↓↓ */
  padding: clamp(0.5rem, 1vw, 0.8rem) clamp(1rem, 2vw, 1.8rem);
  border-radius: 30px; /* 略微增加圆角 */
  transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  position: relative;
}

/* 悬停效果 (保持不变) */
.nav-item:hover {
  color: #000000;
  background: rgba(255, 255, 255, 0.7);
  transform: translateY(-2px);
}
.nav-item::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 2px;
  background: var(--rose);
  transition: width 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  border-radius: 1px;
}
.nav-item:hover::before { width: 60%; }

/* 活跃状态 (保持不变) */
.nav-item.active {
  color: #000000;
  background: rgba(255, 255, 255, 0.6);
}
.nav-item.active::before { width: 60%; }


/* 响应式调整 (保持不变，clamp已处理大部分情况，这里作为补充) */
@media (max-width: 992px) {
  .nav {
    padding: 0.5rem 1rem;
    justify-content: flex-start;
  }

  .nav ul {
    overflow-x: auto;
    flex-wrap: nowrap;
    gap: 0.5rem;
    padding-bottom: 5px;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }

  .nav ul::-webkit-scrollbar {
    display: none;
  }

  .nav-item {
    /* 在移动端，将clamp的最小值作为最终值，保证布局稳定 */
    font-size: 1.1rem;
    padding: 0.6rem 1.2rem;
    flex-shrink: 0;
  }
}



/* ---------- 0. 扉页 (Cover Page) ---------- */
/* ---------- 0. 扉页 (最终修复美化版 v2) ---------- */
#cover {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #4a2c2a;
}

/* --- 背景容器与视频 --- */
.cover-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* ↓↓↓↓↓↓ 核心修复点 1：视频背景完美居中自适应 ↓↓↓↓↓↓ */
.cover-video {
  position: absolute;
  top: 50%; /* 垂直居中 */
  left: 50%; /* 水平居中 */
  transform: translate(-50%, -50%); /* 以自身中心为基准进行偏移 */
  min-width: 100%;
  min-height: 100%;
  width: auto;
  height: auto;
}
/* ↑↑↑↑↑↑ 核心修复点 1 结束 ↑↑↑↑↑↑ */

.video-overlay {
  position: absolute;
  inset: 0;
  background: rgba(255, 249, 245, 0.3);
  z-index: 2;
}
.cover-fallback-bg {
  position: absolute; inset: 0;
  background: linear-gradient(135deg, var(--cream) 0%, #F5E6E8 50%, var(--rose) 100%);
  z-index: 0;
}

/* --- 页面内容 (样式保持您满意的版本) --- */
.cover-title, .cover-sub, .cover-quote {
  position: relative;
  z-index: 3;
  text-align: center;
}
.cover-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2.5rem, 6vw, 5rem);
  font-weight: 700; margin: 0 0 1rem;
  letter-spacing: 0.08em; text-shadow: 0 3px 8px rgba(255, 255, 255, 0.8);
  color: var(--rose);
}
.cover-title .heart { display: inline-block; animation: pulse 1.5s ease-in-out infinite; margin: 0 0.3em; }
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); color: #E85A7A; }
}

.cover-sub {
  margin: 0.5rem 0 2rem;
  font-size: clamp(1.1rem, 1rem + 1vw, 2.0rem);
  font-family: 'Noto Sans SC', sans-serif;
  font-weight: 500;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: #3a1f1d;
  text-shadow: 0 2px 6px rgba(255, 255, 255, 0.9);
}

.cover-quote {
  /* 核心修复点 1：使用 clamp 函数显著增大字体 */
  /* 最小1.2rem, 理想值为 1rem + 1vw, 最大1.8rem */
  font-size: clamp(0.9rem, 0.8rem + 1vw, 1.5rem);

  /* 核心修复点 2：增加最大宽度和外边距，给予更多呼吸空间 */
  max-width: 700px; /* 从 600px 增加到 700px */
  margin-top: 2rem;   /* 从 1rem 增加到 2rem */

  padding: 0 1.5rem;
  line-height: 1.8; /* 略微增加行高以适应更大的字体 */
  text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
  color: #5d3a37;
  font-style: italic;
  font-family: 'Noto Sans SC', sans-serif; /* 确保使用优雅的中文字体 */
}

/* --- 爱心粒子效果 (样式保持您满意的版本) --- */
.love-bubble {
  position: fixed; pointer-events: none; z-index: 9999;
  width: 18px; height: 16px; opacity: 0;
}
.love-bubble.path-1 { animation: floatCurve1 2s ease-out forwards; }
.love-bubble.path-2 { animation: floatCurve2 1.8s ease-out forwards; }
.love-bubble.path-3 { animation: floatSpiral 2.2s ease-out forwards; }
.love-bubble.path-4 { animation: floatWave 1.9s ease-out forwards; }
.love-bubble.path-5 { animation: floatBounce 2.1s ease-out forwards; }

@keyframes floatCurve1 {
  0% { transform: scale(0.3) translateY(0) translateX(0) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.3) translateY(-120px) translateX(0) rotate(360deg); opacity: 0; }
}
@keyframes floatCurve2 {
  0% { transform: scale(0.2) translateY(0) translateX(0) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.4) translateY(-130px) translateX(0) rotate(360deg); opacity: 0; }
}
@keyframes floatSpiral {
  0% { transform: scale(0.3) translateY(0) translateX(0) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.3) translateY(-160px) translateX(0) rotate(720deg); opacity: 0; }
}
@keyframes floatWave {
  0% { transform: scale(0.3) translateY(0) translateX(0) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.4) translateY(-120px) translateX(0) rotate(360deg); opacity: 0; }
}
@keyframes floatBounce {
  0% { transform: scale(0.3) translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.3) translateY(-120px) rotate(360deg); opacity: 0; }
}

/* ---------- 1. 相识 ---------- */
/* ---------- 1. 初见时刻 (动态回放版) ---------- */
#firstday {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background-color: #fcf8f6; /* A soft background color */
  background: linear-gradient(180deg, var(--bg-daybreak) 0%, var(--bg-midnight) 100%);
  color: #551C1C; /* 确保在深色背景下文字清晰 */
}

.playback-container {
  width: 100%;
  max-width: 700px;
  margin: 2rem auto;
  padding: 1rem;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.08);
}

.playback-container {
  width: 100%;
  max-width: 700px;
  margin: 2rem auto;
  padding: 1rem;
  /* ↓↓↓↓↓↓ 核心修改点：容器背景设为黑色 ↓↓↓↓↓↓ */
  background: #062339;
  border-radius: 20px;
  box-shadow: 0 10px 50px rgba(231, 181, 161, 0.15); /* 阴影可以使用主题色，更有氛围 */
  border: 1px solid #333; /* 增加一个深灰色边框 */
}

.chat-window {
  height: 60vh;
  padding: 1rem;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  /* Custom scrollbar for a cleaner look */
  scrollbar-width: thin;
  scrollbar-color: var(--rose) #f1f1f1;
}


.chat-window::-webkit-scrollbar {
  width: 6px;
}

.chat-window::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.chat-window::-webkit-scrollbar-thumb {
  background-color: var(--rose);
  border-radius: 3px;
}

.chat-bubble-wrapper {
  display: flex;
  align-items: flex-start;
  margin-bottom: 1rem;
  max-width: 80%;
  /* This will be animated by GSAP */
  opacity: 0;
  transform: translateY(30px);
}

.chat-bubble-wrapper .avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.chat-bubble {
  padding: 0.8rem 1rem;
  border-radius: 18px;
  font-size: 0.95rem;
  line-height: 1.5;
  position: relative;
}

/* Her's messages (left side) */
.chat-bubble-wrapper.her {
  align-self: flex-start;
}

.chat-bubble-wrapper.her .avatar {
  margin-right: 10px;
}

.chat-bubble-wrapper.her .chat-bubble {
  background-color: #f1f0f0;
  color: #333;
  border-top-left-radius: 4px;
}

/* Me's messages (right side) */
.chat-bubble-wrapper.me {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.chat-bubble-wrapper.me .avatar {
  margin-left: 10px;
}

.chat-bubble-wrapper.me .chat-bubble {
  background: linear-gradient(135deg, var(--rose), #e7b5a1);
  color: white;
  border-top-right-radius: 4px;
}

/* Playback Controls */
.playback-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid #f0f0f0;
}

.control-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.control-btn svg {
  width: 24px;
  height: 24px;
  fill: var(--rose);
  transition: transform 0.2s ease;
}

.control-btn:hover svg {
  transform: scale(1.1);
}

.speed-control {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  color: #666;
}

#speedSlider {
  -webkit-appearance: none;
  width: 120px;
  height: 6px;
  background: #ddd;
  border-radius: 3px;
  outline: none;
}

#speedSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: var(--rose);
  border-radius: 50%;
  cursor: pointer;
}

/* ---------- 2. 我们的故事星图 (豪华升级版) ---------- */
#timeline {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 4rem 1rem;
  background: #1a1a2e; /* 深邃星空蓝 */
  color: #e0e0e0;
  background: linear-gradient(180deg, var(--bg-midnight) 0%, var(--bg-starlight) 100%);
  color: #e0e0e0;
}

#timeline .section-title,
#timeline .section-subtitle {
  color: #fff;
  text-shadow: 0 0 10px rgba(231, 181, 161, 0.5);
}

#timeline .section-subtitle {
  margin-top: 0.5rem;
  margin-bottom: 3rem;
  color: #a9a9d4;
  font-size: 1.1rem;
}

/* 关键数据卡片 */
.timeline-stats {
  display: flex;
  gap: 2rem;
  margin-bottom: 3rem;
}

.stat-card {
  background: rgba(23, 23, 43, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 1.5rem;
  border-radius: 20px;
  text-align: center;
  width: 200px;
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.stat-icon {
  font-size: 2.5rem;
  line-height: 1;
}

.stat-value {
  font-size: 2rem;
  font-weight: 700;
  color: #fff;
  margin: 0.5rem 0;
}

.stat-label {
  font-size: 0.9rem;
  color: #a9a9d4;
}

/* ECharts 图表容器 */
.chart-box {
  width: 95%;
  max-width: 1200px; /* 放大图表 */
  height: 500px; /* 增加高度以容纳更多细节 */
}

/* 她的喜好画廊 */
.preferences-section {
  width: 95%;
  max-width: 1200px;
  margin-top: 4rem;
}

.preferences-title {
  text-align: center;
  font-size: 1.5rem;
  color: #fff;
  margin-bottom: 2rem;
}

.preferences-gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.preference-card {
  background: rgba(23, 23, 43, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  padding: 1.5rem;
  min-height: 200px;
}

.preference-card h4 {
  color: var(--rose);
  margin-top: 0;
  margin-bottom: 1rem;
  border-bottom: 1px solid rgba(231, 181, 161, 0.3);
  padding-bottom: 0.5rem;
}

.preference-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
  font-size: 0.9rem;
  max-height: 150px;
  overflow-y: auto;
}

.preference-card li {
  color: #d0d0f0;
  margin-bottom: 0.8rem;
  line-height: 1.5;
}
.preference-card li small {
  display: block;
  color: #8282b2;
  opacity: 0.7;
}

/* ---------- 3. 数据爱意 ---------- */
/* ---------- 3. 数据爱意 (豪华版仪表盘) ---------- */
#stats {
  background: linear-gradient(to bottom, #fdf4f6, #f8eef2);
  padding: 4rem 1rem;
}

.section-subtitle {
  text-align: center;
  /* ↓↓↓↓↓↓ 核心修改点：将负外边距改为正值 ↓↓↓↓↓↓ */
  margin-top: 0.5rem;
  /* ↑↑↑↑↑↑ 核心修改点结束 ↑↑↑↑↑↑ */
  margin-bottom: 3rem;
  color: #a08da6;
  font-size: 1.1rem;
}

.stats-dashboard {
  max-width: 1200px;
  margin: auto;
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(4, 1fr);
  grid-auto-rows: minmax(150px, auto);
}

.stats-widget {
  background: rgba(255, 255, 255, 0.7);
  border-radius: 20px;
  padding: 1.5rem;
  box-shadow: 0 8px 32px 0 rgba(199, 182, 215, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.stats-widget:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px 0 rgba(199, 182, 215, 0.3);
}

.widget-title {
  font-size: 1.1rem;
  color: var(--rose);
  margin: 0 0 1rem 0;
  text-align: center;
  font-weight: 600;
}

.widget-content {
  width: 100%;
  height: calc(100% - 2.5rem); /* 减去标题高度和margin */
}

/* --- Widget 布局 --- */
.core-stats { grid-column: 1 / -1; display: flex; justify-content: space-around; align-items: center; }
.chart-widget { grid-column: span 2; height: 350px; }
.compare-widget { grid-column: span 2; }
.side-by-side-widget { grid-column: span 2; display: flex; gap: 1rem; }
.long-widget { grid-column: 1 / -1; height: 400px; }

/* --- Widget 具体样式 --- */
/* 核心数据 */
.core-stats .stat-item { text-align: center; }
.stat-number { display: block; font-size: 2.5rem; font-weight: 700; color: #4a2c2a; }
.stat-label { font-size: 0.9rem; color: #a08da6; }

/* 对比条 */
.compare-widget .compare-item { margin-bottom: 1.2rem; }
.compare-label { font-size: 0.9rem; margin-bottom: 0.5rem; color: #666; }
.compare-bar { display: flex; width: 100%; height: 18px; background: #eee; border-radius: 9px; overflow: hidden; }
.bar-her { background: var(--rose); transition: width 1s ease-out; }
.bar-me { background: var(--lilac); transition: width 1s ease-out; }
.compare-values { display: flex; justify-content: space-between; font-size: 0.8rem; margin-top: 0.3rem; color: #999; }
.compare-values span:nth-child(2) { font-weight: bold; color: #ccc; }

/* 并排 Widget */
.side-by-side-widget .sbs-item { width: 50%; text-align: center; background: #f9f5f7; padding: 1rem; border-radius: 15px;}
.sbs-item p { margin: 0.5rem 0; font-size: 0.9rem; color: #555;}
.sbs-item strong { font-size: 1.2rem; color: #4a2c2a;}


/* 响应式布局 */
@media (max-width: 992px) {
  .stats-dashboard { grid-template-columns: repeat(2, 1fr); }
  .core-stats { flex-wrap: wrap; gap: 1.5rem; }
  .core-stats .stat-item { flex-basis: 40%; }
}

@media (max-width: 768px) {
  .stats-dashboard { grid-template-columns: 1fr; }
  .stats-widget, .chart-widget, .compare-widget, .side-by-side-widget, .long-widget {
    grid-column: 1 / -1;
  }
}


/* ---------- 4. 照片墙 ---------- */
#gallery {
  /* 从樱花粉，回到代表日常生活的温暖奶油白 */
  background: linear-gradient(180deg, var(--bg-daylight) 0%, var(--bg-daybreak) 100%);
  color: var(--dark);}

/* ===== 区域容器 ===== */
.zone {
  /* ↓↓↓↓↓↓ 核心修改点 ↓↓↓↓↓↓ */
  width: 70%;         /* 设置容器宽度为屏幕（视口）的 70% */
  /* ↑↑↑↑↑↑ 核心修改点 ↑↑↑↑↑↑ */

  margin-bottom: 5rem;  /* 可以适当增加区域间距，让布局更舒展 */
  margin-left: auto;    /* 这两行配合 width: 70% 实现水平居中 */
  margin-right: auto;
  padding: 0;           /* 由于内部已有画框，外部容器不再需要左右内边距 */
}

.zone-title {
  margin: 0 0 1.5rem;
  font-size: 1.5rem; /* 标题也可以稍微大一点 */
  color: var(--rose);
  text-align: center;
}

/* ===== 拼贴画的 "画框" 容器 ===== */
.grid {
  position: relative;
  overflow: hidden;
  width: 100%; /* 宽度占满父容器 (.zone)，即占满 70% 的屏宽 */
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12); /* 阴影可以更明显一点 */
  transition: opacity 0.5s ease-in-out;
}

/* 为不同区域设置不同的宽高比，增加视觉丰富性 */
.grid-food {
  aspect-ratio: 16 / 9;
}
.grid-people {
  aspect-ratio: 4 / 3;
}
.grid-object {
  aspect-ratio: 2 / 1;
}

/* ===== 拼贴画中的每一张图片 ===== */
.grid img {
  position: absolute !important;
  height: auto;
  display: block;
  border: 4px solid #fff;
  border-radius: 8px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* ===== 区域描述文字 ===== */
/* ↓↓↓↓↓↓ 核心修复点 1：全新设计的自适应正文样式 ↓↓↓↓↓↓ */
.zone-description {
  max-width: clamp(400px, 90vw, 900px); /* 自适应宽度 */
  margin: 2rem auto; /* 关键：左右margin设为auto实现元素居中 */
  padding: 0 1rem;
  font-size: clamp(1rem, 0.8rem + 0.6vw, 1.4rem);
  font-family: 'Noto Sans SC', sans-serif;
  line-height: 1.8;
  color: #0A182F;
  text-align: justify; /* 文本两端对齐 */
  text-justify: inter-word; /* 优化两端对齐的间距 */
  letter-spacing: 0.05em;
}

.zone-description2 {
  max-width: clamp(400px, 90vw, 900px); /* 自适应宽度 */
  margin: 2rem auto; /* 关键：左右margin设为auto实现元素居中 */
  padding: 0 1rem;
  font-size: clamp(1rem, 0.8rem + 0.6vw, 1.4rem);
  font-family: 'Noto Sans SC', sans-serif;
  line-height: 1.8;
  color: #F7F5F5;
  text-align: justify; /* 文本两端对齐 */
  text-justify: inter-word; /* 优化两端对齐的间距 */
  letter-spacing: 0.05em;
}

/* ↑↑↑↑↑↑ 核心修复点 1 结束 ↑↑↑↑↑↑ */


/* ---------- 5. 声与影 (最终版：统计+分页) ---------- */
/* ---------- 5. 声与影 (最终修复美化版) ---------- */
/* ---------- 5. 声与影 (最终美化版) ---------- */
#media { background: #1a1a2e; padding: 4rem 1rem; overflow: hidden; /* 防止辉光溢出 */ }
#media {
  /* 从明亮的白昼，再次进入代表影院氛围的深邃星空 */
  background: linear-gradient(180deg, var(--bg-daybreak) 0%, var(--bg-dusk) 70%, var(--bg-chp5) 100%);
  color: #e0e0e0;
}
#media .section-title { color: #fff; text-shadow: 0 0 10px rgba(231, 181, 161, 0.5); margin-bottom: 3rem; }
#media .section-title {
  color: #fff;
  text-shadow: 0 0 10px rgba(109, 94, 7, 0.9);
}
/* --- 数据统计部分 (样式不变) --- */
.media-stats-container { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 1200px; margin: 0 auto 4rem auto; }
.stats-column { background: rgba(23, 23, 43, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 1.5rem; }
.stats-column h3 { text-align: center; color: #fff; margin-top: 0; }
.stats-cards { display: flex; justify-content: space-around; gap: 1rem; margin-bottom: 1.5rem; }
.stat-card-small { text-align: center; }
.stat-value-small { font-size: 1.5rem; font-weight: 700; color: #fff; display: block; }
.stat-label-small { font-size: 0.8rem; color: #a9a9d4; }
.stats-chart-container { width: 100%; height: 200px; margin-bottom: 1.5rem; }
.poetic-text-block { font-size: 0.9rem; line-height: 1.7; color: #d0d0f0; font-style: italic; }

/* --- Tab 与 Panel 基础样式 (样式不变) --- */
.media-tabs { display: flex; justify-content: center; gap: 2rem; margin-bottom: 3rem; }
.tab-btn { background: transparent; border: 2px solid #a9a9d4; color: #a9a9d4; padding: .6rem 1.4rem; border-radius: 20px; font-size: 1rem; cursor: pointer; transition: .3s; }
.tab-btn.active, .tab-btn:hover { background: var(--rose); color: #fff; border-color: var(--rose); }
.panel { display: none; }
.panel.active { display: block; }

/* --- 视频展厅 (布局与样式修复) --- */
.cinema-container { max-width: 1200px; margin: auto; }
.main-player-wrapper { display: flex; gap: 1.5rem; margin-bottom: 1.5rem; align-items: flex-start; }
#mainPlayerContainer { flex: 1; min-width: 60%; background: #000; border-radius: 15px; overflow: hidden; aspect-ratio: 16 / 9; }
#mainPlayerContainer .plyr { width: 100%; height: 100%; object-fit: contain; }
#videoContext { flex-basis: 350px; flex-shrink: 0; background: rgba(23, 23, 43, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 1rem; height: auto; max-height: 500px; overflow-y: auto; }
.context-message-wrapper { display: flex; margin-bottom: 1rem; max-width: 95%; }
.context-message-wrapper .avatar { width: 30px; height: 30px; border-radius: 50%; }
.context-message-wrapper .content-bubble { padding: 0.6rem 1rem; border-radius: 15px; font-size: 0.9rem; line-height: 1.5; }
.context-message-wrapper.her { align-self: flex-start; }
.context-message-wrapper.her .avatar { margin-right: 8px; }
.context-message-wrapper.her .content-bubble { background: #333; color: #e0e0e0; border-top-left-radius: 4px; }
.context-message-wrapper.me { align-self: flex-end; flex-direction: row-reverse; }
.context-message-wrapper.me .avatar { margin-left: 8px; }
.context-message-wrapper.me .content-bubble { background: var(--rose); color: #fff; border-top-right-radius: 4px; }
.context-message.video-placeholder { text-align: center; width: 100%; color: #8282b2; font-style: italic; padding: 2rem 0; }

/* ↓↓↓↓↓↓ 核心美化点 1：电影胶片带样式 ↓↓↓↓↓↓ */
.film-strip-wrapper {
  padding: 1rem 0;
  /* 用渐变模拟胶片的齿孔 */
  background:
    linear-gradient(to right, #111 10px, transparent 10px),
    linear-gradient(to right, #111 10px, transparent 10px),
    linear-gradient(to bottom, #111 10px, transparent 10px),
    linear-gradient(to bottom, #111 10px, transparent 10px);
  background-size: 100% 2px, 100% 2px, 2px 100%, 2px 100%;
  background-position: top, bottom, left, right;
  background-repeat: no-repeat, no-repeat, no-repeat, no-repeat;
  overflow-x: auto;
}
.film-strip { display: flex; gap: 1rem; width: max-content; padding: 0.5rem; }
.film-strip-item {
  width: 180px; height: 100px; flex-shrink: 0;
  cursor: pointer;
  border: 4px solid #333;
  border-radius: 4px;
  overflow: hidden; position: relative;
  background: #111;
  box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}
.film-strip-item.active, .film-strip-item:hover {
  border-color: var(--rose);
  box-shadow: 0 0 15px rgba(231, 181, 161, 0.5);
}
.film-strip-item img {
  width: 100%; height: 100%;
  object-fit: contain; /* 核心修复点：保证缩略图完整显示 */
  transition: opacity 0.3s ease;
}
/* 美化滚动条 */
.film-strip-wrapper::-webkit-scrollbar { height: 8px; }
.film-strip-wrapper::-webkit-scrollbar-track { background: #222; border-radius: 4px; }
.film-strip-wrapper::-webkit-scrollbar-thumb { background: var(--rose); border-radius: 4px; }
/* ↑↑↑↑↑↑ 核心美化点 1 结束 ↑↑↑↑↑↑ */


/* --- 语音展厅 (样式修复与美化) --- */
/* 核心修复点 2：为语音墙设置更合理的minmax，保证布局美观 */
.voice-wall {
  display: grid;
  /* minmax(320px, 1fr) 意味着卡片最小320px，若空间允许多列则平分 */
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem; max-width: 1200px; margin: auto; min-height: 300px;
}
.voice-card { background: rgba(23, 23, 43, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 1rem; width: 100%; display: flex; align-items: center; gap: 1rem; transition: all 0.3s ease; }
.voice-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
/* ... (其他语音卡片样式不变) ... */
.voice-play-btn { background: none; border: none; cursor: pointer; padding: 0; }
.voice-play-btn svg { width: 28px; height: 28px; fill: var(--rose); transition: fill 0.2s ease; }
.voice-play-btn.playing svg { fill: #48dbfb; }
/* 核心修复点：美化声波图容器 */
.waveform-container { flex: 1; height: 40px; display: flex; align-items: center; justify-content: space-between; gap: 2px; }
.waveform-bar { background-color: #a9a9d4; width: 3px; border-radius: 2px; transition: background-color 0.1s linear; }
.waveform-bar.played { background-color: var(--rose); }
.voice-duration { font-size: 0.9rem; color: #a9a9d4; }
.voice-pagination-controls { display: flex; justify-content: center; align-items: center; gap: 0.5rem; margin-top: 2rem; color: #fff; }


/* ↓↓↓↓↓↓ 核心美化点 3：重构分页控件样式 ↓↓↓↓↓↓ */
.voice-pagination-controls { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 2.5rem; color: #fff; }
.pagination-btn {
  background: none; color: #a9a9d4;
  border: none;
  font-size: 1.2rem;
  cursor: pointer; transition: all .3s;
}
.pagination-btn:hover { color: #fff; }
.pagination-btn:disabled { color: #555; cursor: not-allowed; }
.pagination-pages { display: flex; gap: 0.5rem; }
.page-btn {
  background: transparent;
  border: 1px solid #555;
  color: #a9a9d4;
  width: 36px; height: 36px;
  border-radius: 50%; /* 圆形按钮 */
  cursor: pointer; transition: all .3s;
  display: flex; justify-content: center; align-items: center;
}
.page-btn:hover {
  border-color: var(--rose);
  color: var(--rose);
}
.page-btn.active {
  background: var(--rose);
  color: #fff;
  font-weight: bold;
  border-color: var(--rose);
  box-shadow: 0 0 10px rgba(231, 181, 161, 0.4);
}
/* ↑↑↑↑↑↑ 核心美化点 3 结束 ↑↑↑↑↑↑ */


/* 响应式调整 */
@media (max-width: 992px) {
  .media-stats-container { grid-template-columns: 1fr; }
  .main-player-wrapper { flex-direction: column; }
  #videoContext { width: 100%; flex-basis: auto; height: 300px; }
}


/* ---------- 6. 最后一封信 ---------- */
#letter {
  /* 从最深的夜，迎来最终的、充满希望的晨曦，回归故事的起点 */
  background: linear-gradient(180deg, var(--bg-chp6) 0%, var(--bg-dusk) 70%, var(--bg-daybreak) 100%);
  color: var(--dark);
}
#letter .section-title {
  /* 在渐变上半部分的深色背景中，标题需要是亮色 */
  color: #fff;
  text-shadow:
}


.letter-body{max-width:700px}
#handwriteSvg{background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08)}

